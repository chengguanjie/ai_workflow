# ===========================================
# AI Workflow 环境变量配置
# Zeabur 部署时在控制台配置这些变量
# ===========================================

# -----------------------------------------
# 数据库配置 (必需)
# -----------------------------------------
# MySQL 数据库连接 URL
# Zeabur MySQL 服务会自动注入此变量
DATABASE_URL="mysql://user:password@host:3306/database?connection_limit=20&pool_timeout=30"

# PGVector 数据库 (可选，用于向量存储)
# PGVECTOR_DATABASE_URL="postgresql://user:password@host:5432/database"

# -----------------------------------------
# 认证配置 (必需)
# -----------------------------------------
# NextAuth 密钥 - 使用 openssl rand -base64 32 生成
AUTH_SECRET="your-auth-secret-here"

# 应用 URL - 部署后的域名
AUTH_URL="https://your-app.zeabur.app"
NEXTAUTH_URL="https://your-app.zeabur.app"

# 公开访问 URL
NEXT_PUBLIC_APP_URL="https://your-app.zeabur.app"
NEXT_PUBLIC_BASE_URL="https://your-app.zeabur.app"

# Session 配置 (可选)
# Session 最大有效期 (秒)，默认 604800 (7天)
# 可选值: 86400 (1天), 604800 (7天), 2592000 (30天)
# SESSION_MAX_AGE="604800"

# -----------------------------------------
# 加密配置 (必需)
# -----------------------------------------
# 数据加密密钥 - 使用 openssl rand -base64 32 生成
ENCRYPTION_KEY="your-encryption-key-here"

# 加密盐值 (必需) - 使用 openssl rand -base64 16 生成
# 警告: 此值一旦设置后不要更改，否则已加密的数据将无法解密
ENCRYPTION_SALT="your-unique-salt-here"

# -----------------------------------------
# 平台管理员配置 (初始化时必需)
# -----------------------------------------
# 管理员邮箱
CONSOLE_ADMIN_EMAIL="admin@example.com"

# 管理员密码 (至少8个字符，包含大小写字母和数字)
# 警告: 请勿使用默认密码，务必设置强密码
CONSOLE_ADMIN_PASSWORD="YourSecurePassword123"

# 管理员名称 (可选)
# CONSOLE_ADMIN_NAME="超级管理员"

# -----------------------------------------
# Redis 配置 (可选，用于队列)
# -----------------------------------------
# 方式1: 使用 Redis URL (推荐)
# Zeabur Redis 服务会自动注入此变量
# REDIS_URL="redis://default:password@host:6379"

# 方式2: 分开配置
# REDIS_HOST="localhost"
# REDIS_PORT="6379"
# REDIS_PASSWORD=""
# REDIS_DB="0"

# 队列并发数
# QUEUE_CONCURRENCY="5"

# -----------------------------------------
# AI 服务配置 (按需配置)
# -----------------------------------------
# 胜算云 API (推荐)
# SHENSUAN_API_KEY="your-shensuan-api-key"
SHENSUAN_BASE_URL="https://router.shengsuanyun.com/api/v1"

# OpenRouter
OPENROUTER_BASE_URL="https://openrouter.ai/api/v1"

# OpenAI API
# OPENAI_API_KEY="your-openai-api-key"

# Jina API (知识库重排序)
# JINA_API_KEY="your-jina-api-key"

# 默认嵌入模型
# DEFAULT_EMBEDDING_MODEL="text-embedding-ada-002"

# -----------------------------------------
# 存储配置 (可选)
# -----------------------------------------
# 存储类型: LOCAL 或 ALIYUN_OSS
STORAGE_TYPE="LOCAL"

# 本地上传目录 (使用本地存储时)
UPLOAD_DIR="./uploads"

# 阿里云 OSS 配置 (使用 OSS 存储时)
# ALIYUN_OSS_ACCESS_KEY_ID=""
# ALIYUN_OSS_ACCESS_KEY_SECRET=""
# ALIYUN_OSS_BUCKET=""
# ALIYUN_OSS_REGION="oss-cn-hangzhou"

# -----------------------------------------
# 其他配置
# -----------------------------------------
# Node 环境
NODE_ENV="production"

# -----------------------------------------
# 受控公开下载（用于 AI 访问内部媒体文件）
# -----------------------------------------
# 用途：生成临时签名下载链接（/api/files/.../download?token=...）供 AI 服务商拉取视频/图片等
# 推荐：配置独立密钥；若不配则回退到 AUTH_SECRET/ENCRYPTION_KEY
# FILE_DOWNLOAD_TOKEN_SECRET="<<<your-random-secret>>>"

# -----------------------------------------
# 代码执行（高风险，默认关闭）
# -----------------------------------------
# CODE_EXECUTION_ENABLED="false"

# -----------------------------------------
# 渠道授权（OAuth）与发布网关（按需配置）
# -----------------------------------------
# 说明：
# - 公众号（wechat_mp）目前使用 AppID/Secret 获取 access token（非 OAuth 落库）
# - 小红书/抖音/视频号：通过 OAuth 回调将 token 加密落库（仍支持 env 兜底）
#
# 回调域名：
# - `NEXT_PUBLIC_APP_URL` 用于生成 redirect_uri（建议线上配置为真实域名；本地开发按实际端口修改）

# 微信公众号（env）
# WECHAT_MP_APP_ID=""
# WECHAT_MP_APP_SECRET=""

# 小红书 OAuth（token 落库）
# OAUTH_XHS_CLIENT_ID=""
# OAUTH_XHS_CLIENT_SECRET=""
# OAUTH_XHS_AUTHORIZATION_URL=""
# OAUTH_XHS_TOKEN_URL=""
# OAUTH_XHS_SCOPES=""

# 抖音 OAuth（token 落库）
# OAUTH_DOUYIN_CLIENT_ID=""
# OAUTH_DOUYIN_CLIENT_SECRET=""
# OAUTH_DOUYIN_AUTHORIZATION_URL=""
# OAUTH_DOUYIN_TOKEN_URL=""
# OAUTH_DOUYIN_SCOPES=""

# 视频号 OAuth（token 落库）
# OAUTH_WECHAT_CHANNELS_CLIENT_ID=""
# OAUTH_WECHAT_CHANNELS_CLIENT_SECRET=""
# OAUTH_WECHAT_CHANNELS_AUTHORIZATION_URL=""
# OAUTH_WECHAT_CHANNELS_TOKEN_URL=""
# OAUTH_WECHAT_CHANNELS_SCOPES=""

# 发布网关（你自有的 API 网关/服务；当前执行器会向该网关发起发布请求）
# XHS_API_BASE_URL=""
# XHS_PUBLISH_ENDPOINT="/publish"
# DOUYIN_API_BASE_URL=""
# DOUYIN_PUBLISH_ENDPOINT="/publish"
# WECHAT_CHANNELS_API_BASE_URL=""
# WECHAT_CHANNELS_PUBLISH_ENDPOINT="/publish"

# 兼容兜底（不走 OAuth 落库时可直接配置 token）
# XHS_ACCESS_TOKEN=""
# DOUYIN_ACCESS_TOKEN=""
# WECHAT_CHANNELS_ACCESS_TOKEN=""

# 内存向量存储最大容量
# MEMORY_VECTOR_MAX_SIZE="50000"

# -----------------------------------------
# 错误告警配置 (可选)
# -----------------------------------------
# Webhook 告警 URL
# ERROR_ALERT_WEBHOOK_URL="https://your-webhook-endpoint.com/alerts"
# ERROR_ALERT_WEBHOOK_TIMEOUT="5000"

# 邮件告警配置
# ERROR_ALERT_EMAIL_TO="admin@example.com,ops@example.com"
# ERROR_ALERT_EMAIL_FROM="alerts@example.com"
# ERROR_ALERT_EMAIL_SUBJECT="Critical Error Alert"

# Slack 告警配置
# ERROR_ALERT_SLACK_WEBHOOK_URL="https://hooks.slack.com/services/xxx/xxx/xxx"
# ERROR_ALERT_SLACK_CHANNEL="#alerts"
# ERROR_ALERT_SLACK_USERNAME="Error Alert Bot"
# ERROR_ALERT_SLACK_ICON=":rotating_light:"
