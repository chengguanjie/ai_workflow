# AI Workflow

> ğŸš€ ä¼ä¸šçº§ AI å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°

AI Workflow æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°ï¼Œæ”¯æŒå¯è§†åŒ–ç¼–æ’ AI å¤„ç†æµç¨‹ã€çŸ¥è¯†åº“ RAG æ£€ç´¢ã€å¤šæ¨¡æ€å¤„ç†ç­‰èƒ½åŠ›ï¼Œå¸®åŠ©ä¼ä¸šå¿«é€Ÿæ„å»ºæ™ºèƒ½åŒ–å·¥ä½œæµã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒèƒ½åŠ›

- **ğŸ¨ å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨** - æ‹–æ‹½å¼èŠ‚ç‚¹ç¼–æ’ï¼Œå®æ—¶é¢„è§ˆæ‰§è¡Œç»“æœ
- **ğŸ¤– å¤š AI æä¾›å•†æ”¯æŒ** - OpenAIã€Anthropicã€é€šä¹‰åƒé—®ã€æ–‡å¿ƒä¸€è¨€ç­‰ 8+ ä¸ª AI æœåŠ¡å•†
- **ğŸ“š çŸ¥è¯†åº“ RAG** - æ–‡æ¡£å‘é‡åŒ–å­˜å‚¨ä¸æ™ºèƒ½æ£€ç´¢ï¼Œå¢å¼º AI å›ç­”å‡†ç¡®æ€§
- **ğŸ”„ çµæ´»çš„æ§åˆ¶æµ** - æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ã€å¹¶è¡Œæ‰§è¡Œã€åˆå¹¶ç­‰é«˜çº§æµç¨‹æ§åˆ¶
- **ğŸ“Š å¤šæ¨¡æ€å¤„ç†** - æ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šç§æ•°æ®æ ¼å¼
- **ğŸ”— å¤–éƒ¨é›†æˆ** - HTTP è¯·æ±‚ã€Webhook è§¦å‘ã€é£ä¹¦/é’‰é’‰é€šçŸ¥

### ä¼ä¸šç‰¹æ€§

- **ğŸ‘¥ å¤šç§Ÿæˆ·æ¶æ„** - ä¼ä¸šéš”ç¦»ã€éƒ¨é—¨ç®¡ç†ã€è§’è‰²æƒé™æ§åˆ¶
- **ğŸ“ æ¨¡æ¿å¸‚åœº** - å®˜æ–¹æ¨¡æ¿åº“ + ä¼ä¸šå†…éƒ¨æ¨¡æ¿å…±äº«
- **ğŸ“ˆ æ‰§è¡Œç»Ÿè®¡** - å·¥ä½œæµæ‰§è¡Œåˆ†æã€AI åé¦ˆä¼˜åŒ–
- **âœ… äººå·¥å®¡æ‰¹** - Human-in-the-Loop å®¡æ‰¹èŠ‚ç‚¹
- **â° å®šæ—¶è§¦å‘** - Cron è¡¨è¾¾å¼å®šæ—¶æ‰§è¡Œ

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ |
|------|------|
| **å‰ç«¯æ¡†æ¶** | Next.js 15 + React 19 |
| **çŠ¶æ€ç®¡ç†** | Zustand + React Query |
| **UI ç»„ä»¶** | Radix UI + Tailwind CSS |
| **å·¥ä½œæµç”»å¸ƒ** | XY Flow (@xyflow/react) |
| **åç«¯** | Next.js API Routes |
| **æ•°æ®åº“** | MySQL + Prisma ORM |
| **ç¼“å­˜/é˜Ÿåˆ—** | Redis + BullMQ |
| **æµ‹è¯•** | Vitest + Testing Library + Fast-check |
| **éƒ¨ç½²** | Docker / Zeabur |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 20.19.0
- **pnpm** >= 10.23.0
- **MySQL** >= 8.0
- **Redis** >= 6.0

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/your-org/ai-workflow.git
cd ai-workflow
```

2. **å®‰è£…ä¾èµ–**

```bash
pnpm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥å’Œ API å¯†é’¥
```

4. **åˆå§‹åŒ–æ•°æ®åº“**

```bash
pnpm db:generate
pnpm db:push
```

5. **åˆ›å»ºç®¡ç†å‘˜è´¦å·**

```bash
pnpm init:admin
```

6. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
pnpm dev
```

è®¿é—® <http://localhost:3000> å¼€å§‹ä½¿ç”¨ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-workflow/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ (auth)/             # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â”œâ”€â”€ (dashboard)/        # ä»ªè¡¨ç›˜é¡µé¢
â”‚   â”‚   â”œâ”€â”€ (editor)/           # å·¥ä½œæµç¼–è¾‘å™¨
â”‚   â”‚   â””â”€â”€ api/                # API è·¯ç”±
â”‚   â”œâ”€â”€ components/             # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                 # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â””â”€â”€ workflow/           # å·¥ä½œæµç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                    # æ ¸å¿ƒåº“
â”‚   â”‚   â”œâ”€â”€ workflow/           # å·¥ä½œæµå¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ engine.ts       # æ‰§è¡Œå¼•æ“
â”‚   â”‚   â”‚   â””â”€â”€ processors/     # èŠ‚ç‚¹å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ ai/                 # AI æœåŠ¡é›†æˆ
â”‚   â”‚   â”œâ”€â”€ knowledge/          # çŸ¥è¯†åº“ RAG
â”‚   â”‚   â””â”€â”€ api/                # API å·¥å…·
â”‚   â”œâ”€â”€ stores/                 # Zustand çŠ¶æ€å­˜å‚¨
â”‚   â””â”€â”€ types/                  # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ prisma/                     # Prisma Schema
â”œâ”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ scripts/                    # å·¥å…·è„šæœ¬
```

---

## ğŸ“œ å¯ç”¨è„šæœ¬

```bash
# å¼€å‘
pnpm dev                # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm build              # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm start              # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

# æµ‹è¯•
pnpm test               # è¿è¡Œæµ‹è¯•
pnpm test:watch         # ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm test:coverage      # è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

# æ•°æ®åº“
pnpm db:generate        # ç”Ÿæˆ Prisma Client
pnpm db:push            # æ¨é€ Schema åˆ°æ•°æ®åº“
pnpm db:migrate         # è¿è¡Œæ•°æ®åº“è¿ç§»
pnpm db:studio          # å¯åŠ¨ Prisma Studio

# ä»£ç è´¨é‡
pnpm lint               # è¿è¡Œ ESLint æ£€æŸ¥
```

---

## ğŸ”§ èŠ‚ç‚¹ç±»å‹

| ç±»åˆ« | èŠ‚ç‚¹ | æè¿° |
|------|------|------|
| **åŸºç¡€** | INPUT | å®šä¹‰å·¥ä½œæµè¾“å…¥å­—æ®µ |
| | PROCESS | AI æ–‡æœ¬å¤„ç†ï¼Œæ”¯æŒçŸ¥è¯†åº“ |
| | OUTPUT | å®šä¹‰è¾“å‡ºæ ¼å¼å’Œå†…å®¹ |
| | CODE | AI ç”Ÿæˆä»£ç æ‰§è¡Œ |
| **æ§åˆ¶æµ** | CONDITION | æ¡ä»¶åˆ†æ”¯ |
| | LOOP | å¾ªç¯æ‰§è¡Œ |
| | SWITCH | å¤šè·¯åˆ†æ”¯è·¯ç”± |
| | MERGE | åˆå¹¶å¤šä¸ªåˆ†æ”¯ |
| **åª’ä½“** | IMAGE | å›¾ç‰‡å¤„ç† |
| | VIDEO | è§†é¢‘å¤„ç† |
| | AUDIO | éŸ³é¢‘å¤„ç† |
| | DATA | ç»“æ„åŒ–æ•°æ®å¤„ç† |
| **é›†æˆ** | HTTP | HTTP è¯·æ±‚ |
| | NOTIFICATION | é€šçŸ¥æ¶ˆæ¯ |
| | TRIGGER | å·¥ä½œæµè§¦å‘å™¨ |
| **é«˜çº§** | IMAGE_GEN | AI å›¾åƒç”Ÿæˆ |
| | APPROVAL | äººå·¥å®¡æ‰¹ |

---

## ğŸ“š æ–‡æ¡£

- [API æ–‡æ¡£](./docs/API_DOCUMENTATION.md)
- [åŠŸèƒ½è¿­ä»£è·¯çº¿å›¾](./ROADMAP.md)
- [ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’](./docs/OPTIMIZATION_PLAN.md)
- [æƒé™ç³»ç»Ÿè®¾è®¡](./docs/permission-system-design.md)
- [çŸ¥è¯†åº“ä¼˜åŒ–æ–¹æ¡ˆ](./docs/knowledge-base-optimization-plan.md)
- [éƒ¨ç½²æŒ‡å—](./docs/zeabur-deployment.md)

---

## ğŸ”Œ API ä½¿ç”¨

### å¿«é€Ÿå¼€å§‹

é¡¹ç›®æä¾›äº† RESTful API ä¾›å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨ã€‚ä½¿ç”¨å‰éœ€è¦ï¼š

1. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
pnpm dev
```

2. **è·å– API Token**

ç™»å½•ç³»ç»Ÿåï¼Œåœ¨ã€Œè®¾ç½® â†’ API Tokenã€é¡µé¢åˆ›å»º Tokenï¼Œå¹¶èµ‹äºˆç›¸åº”çš„æƒé™èŒƒå›´ï¼ˆscopesï¼‰ã€‚

3. **è°ƒç”¨ API**

```bash
# ç¤ºä¾‹ï¼šè·å–å·¥ä½œæµåˆ—è¡¨
WORKFLOW_API_TOKEN="wf_your_token_here" \
pnpm -s workflow:list:api --base-url http://localhost:3000
```

æˆ–ä½¿ç”¨ curlï¼š

```bash
curl -X GET "http://localhost:3000/api/v1/workflows" \
  -H "Authorization: Bearer wf_your_token_here" \
  -H "Content-Type: application/json"
```

### API ç«¯ç‚¹

- **GET /api/v1/workflows** - è·å–å·¥ä½œæµåˆ—è¡¨
- **POST /api/v1/workflows** - åˆ›å»ºå·¥ä½œæµ
- **GET /api/v1/workflows/[id]** - è·å–å·¥ä½œæµè¯¦æƒ…
- **PUT /api/v1/workflows/[id]** - æ›´æ–°å·¥ä½œæµ
- **POST /api/v1/workflows/[id]/execute** - æ‰§è¡Œå·¥ä½œæµ

è¯¦ç»† API æ–‡æ¡£è¯·å‚è€ƒ [API_DOCUMENTATION.md](./docs/API_DOCUMENTATION.md)

---

## ğŸ§ª æµ‹è¯•

é¡¹ç›®ä½¿ç”¨ Vitest è¿›è¡Œæµ‹è¯•ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•å’Œå±æ€§æµ‹è¯•ï¼ˆProperty-based testingï¼‰ã€‚

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
pnpm test:coverage
```

å½“å‰æµ‹è¯•è¦†ç›–ç‡è¦æ±‚ï¼š

- è¡Œè¦†ç›–ç‡ >= 80%
- åˆ†æ”¯è¦†ç›–ç‡ >= 70%

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### Git æäº¤è§„èŒƒ

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤ Bug
docs: æ›´æ–°æ–‡æ¡£
test: æ·»åŠ æµ‹è¯•
refactor: ä»£ç é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
chore: æ„å»º/å·¥å…·å˜æ›´
```

### åˆ†æ”¯ç­–ç•¥

- `main` - ç”Ÿäº§åˆ†æ”¯
- `develop` - å¼€å‘åˆ†æ”¯
- `feature/*` - åŠŸèƒ½åˆ†æ”¯
- `bugfix/*` - ä¿®å¤åˆ†æ”¯

---

## ğŸ“„ è®¸å¯è¯

[MIT](./LICENSE)

---

## ğŸ™ è‡´è°¢

- [Next.js](https://nextjs.org/)
- [XY Flow](https://reactflow.dev/)
- [Radix UI](https://www.radix-ui.com/)
- [Prisma](https://www.prisma.io/)

---

**ç»´æŠ¤è€…**: AI Workflow Team  
**æœ€åæ›´æ–°**: 2025-12-23
